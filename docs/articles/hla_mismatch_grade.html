<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HLA Mismatch Level • transplantr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="HLA Mismatch Level">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">transplantr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/egfr.html">Estimated GFR</a>
    </li>
    <li>
      <a href="../articles/hla_mismatch_grade.html">HLA Mismatch Level</a>
    </li>
    <li>
      <a href="../articles/kidney_risk_scores.html">Kidney Donor and Recipient Risk Index</a>
    </li>
    <li>
      <a href="../articles/liver_recipient_scoring.html">Liver recipient scoring</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/johnasher/transplantr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>HLA Mismatch Level</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/johnasher/transplantr/blob/master/vignettes/hla_mismatch_grade.Rmd"><code>vignettes/hla_mismatch_grade.Rmd</code></a></small>
      <div class="hidden name"><code>hla_mismatch_grade.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The national deceased donor matching scheme used in the UK takes into account the HLA mismatch between donor and potential recipient when assigning points to determine the matching sequence. Rather than using a crude number of antigen mismatches, it takes into account the differing immunological effect of mismatches at different loci and assigns a mismatch level from the A:B:DR mismatch, as in the table below:</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Level</th>
<th>HLA mismatch summary</th>
<th>HLA mismatch combinations</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>000</td>
<td>000</td>
</tr>
<tr class="even">
<td>2</td>
<td>[0 DR and 0/1 B]</td>
<td>100, 010, 110, 200, 210</td>
</tr>
<tr class="odd">
<td>3</td>
<td>[0 DR and 2 B] or [1 DR and 0/1 B]</td>
<td>020, 120, 220, 001, 101, 201, 011, 111, 211</td>
</tr>
<tr class="even">
<td>4</td>
<td>[1 DR and 2 B] or [2 DR]</td>
<td>021, 121, 221, 002, 102, 202, 012, 112, 212, 022, 122, 222</td>
</tr>
</tbody>
</table>
<p>The <em>transplantr</em> package has two vectorised functions to calculate the mismatch level. The <code><a href="../reference/hla_mm_level.html">hla_mm_level()</a></code> takes three vectors as arguments, one for each of A, B and DR mismatches, while the <code><a href="../reference/hla_mm_level_str.html">hla_mm_level_str()</a></code> function takes a single character string vector representing the mismatch.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(transplantr)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt; Attaching package: 'dplyr'</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt; The following objects are masked from 'package:stats':</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt;     filter, lag</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; The following objects are masked from 'package:base':</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt;     intersect, setdiff, setequal, union</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="kw"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(mismatches)</a></code></pre></div>
</div>
<div id="using-hla_mm_level" class="section level1">
<h1 class="hasAnchor">
<a href="#using-hla_mm_level" class="anchor"></a>Using hla_mm_level()</h1>
<p>This function should be used to calculate match level if the A, B and DR mismatches are separate variables in the data frame. It uses three parameters called <code>a</code>, <code>b</code> and <code>dr</code>, all numeric vectors with possible values of 0 to 2.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># create new mismatch level variable using a dplyr pipe</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">mismatches <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span>(<span class="op">-</span>HLA.MM, <span class="op">-</span>HLA.MM.s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span>(<span class="dt">Mismatch.Level =</span> <span class="kw"><a href="../reference/hla_mm_level.html">hla_mm_level</a></span>(<span class="dt">a =</span> HLA.A.MM, <span class="dt">b =</span> HLA.B.MM, <span class="dt">dr =</span> HLA.DR.MM))</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt;   HLA.A.MM HLA.B.MM HLA.DR.MM Mismatch.Level</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; 1        0        0         0              1</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; 2        1        1         0              2</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; 3        2        1         1              3</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; 4        2        1         2              4</span></a></code></pre></div>
</div>
<div id="using-hla_mm_level_str" class="section level1">
<h1 class="hasAnchor">
<a href="#using-hla_mm_level_str" class="anchor"></a>Using hla_mm_level_str()</h1>
<p>Instead of three separate vectors, mismatch may be stored as string such as “1:0:1” or “021” representing A, B and DR mismatches. It is better to store these in a dataframe as strings rather than as numeric in case meaningful zeroes are removed from the start!</p>
<p>The <code><a href="../reference/hla_mm_level_str.html">hla_mm_level_str()</a></code> function takes two arguments, the first <code>mm</code> is for the character string vector for the mismatches, and the second <code>sep</code> is a logical value indicating whether separators are used to separate the values for the each locus. <code>sep</code> defaults to TRUE and essentially tells the function to use the first, third and fifth characters in the string, compared to <code>sep = FALSE</code> which takes the first, second and third characters. It does not matter what the separator character is, as long as there is both a single character between A and B, and a single character between B and DR; they do not even need to be the same character. For example, “1:0:1”, “1-0-1”, “1.0.1” and even “1-0:1” will all work, but “1:00” will not and neither will “1::0.0”.</p>
<p>Like the <code><a href="../reference/hla_mm_level.html">hla_mm_level()</a></code> function, it is easiest to implement via a <em>dplyr</em> pipe:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># if the HLA.Mismatch variable does not use separators</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">mismatches <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span>(HLA.MM) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span>(<span class="dt">Mismatch.Level =</span> <span class="kw"><a href="../reference/hla_mm_level_str.html">hla_mm_level_str</a></span>(<span class="dt">mm =</span> HLA.MM, <span class="dt">sep =</span> <span class="ot">FALSE</span>))</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;   HLA.MM Mismatch.Level</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; 1    000              1</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; 2    110              2</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 3    211              3</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; 4    212              4</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co"># if the HLA.Mismatch variable does use separators, sep is optional</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12">mismatches <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/select.html">select</a></span>(HLA.MM.s) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/mutate.html">mutate</a></span>(<span class="dt">Mismatch.Level =</span> <span class="kw"><a href="../reference/hla_mm_level_str.html">hla_mm_level_str</a></span>(<span class="dt">mm =</span> HLA.MM.s))</a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;   HLA.MM.s Mismatch.Level</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; 1    0:0:0              1</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; 2    1:1:0              2</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; 3    2:1:1              3</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; 4    2:1:2              4</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#using-hla_mm_level">Using hla_mm_level()</a></li>
      <li><a href="#using-hla_mm_level_str">Using hla_mm_level_str()</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by John Asher.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
